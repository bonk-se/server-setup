#
# Config from https://github.com/bonk-se/server-setup
# @author miken@bonk.se
#

#------------------------------------------------------------------------------
# For information about entries in this file, type "man shorewall-rules"
######################################################################################################################################################################################
#ACTION		SOURCE		DEST		PROTO	DEST	SOURCE		ORIGINAL	RATE		USER/	MARK	CONNLIMIT	TIME         HEADERS         SWITCH
#							PORT	PORT(S)		DEST		LIMIT		GROUP
#SECTION ALL
#SECTION ESTABLISHED
#SECTION RELATED
SECTION NEW

#       Don't allow connection pickup from the net
#
Invalid(DROP)	net		all
#
#	Accept DNS connections from the firewall to the network
#
DNS(ACCEPT)	loc		net
DNS(ACCEPT)	$FW		net
#
#	Allow Ping from the local network
#
Ping(ACCEPT)	loc		$FW

#
# Drop Ping from the "bad" net zone.. and prevent your log from being flooded..
#

Ping(DROP)	net		$FW

ACCEPT		$FW		loc		icmp
ACCEPT		$FW		net		icmp
#

#=================================
# Added by miken

# SSH
ACCEPT		loc		fw		tcp	27
ACCEPT		net		fw		tcp	27
#-- Web-server
ACCEPT		net		fw		tcp	80
#-- Torrent
ACCEPT		net		fw		tcp	10001:11001
#-- FTP
ACCEPT		net		fw		tcp	20:21
ACCEPT		net		fw		tcp	49101:49999
# Transmission
ACCEPT		net		fw		tcp	9091
# SAMBA
SMB(ACCEPT)	net:192.168.1.0/24	fw
SMB(ACCEPT)	fw		net
SMB(ACCEPT)	loc		fw
# Plex Media Server
ACCEPT		net		fw		tcp	32400
ACCEPT		loc		fw		tcp	32400
